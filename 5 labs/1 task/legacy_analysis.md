# Legacy Code Analysis

## Overview
Код написан в стиле до ES6: глобальные переменные, функции-конструкторы, отсутствие модулей.

## Legacy patterns

1. Использование `var`
   - Примеры: `var taxRate = 0.08;`, `var currency = "USD";`.
   - Проблема: function-scope, возможные баги с hoisting, нельзя задать неизменяемость.

2. Глобальные переменные и отсутствие модулей
   - `taxRate`, `currency`, `cart`, `p1`, `formatPrice` живут в global scope.
   - Проблема: загрязнение глобального пространства имён, сложности с переиспользованием.

3. Функции-конструкторы вместо классов
   - `function Product(id, name, price) { ... }`, `function Cart() { ... }`.
   - Проблема: менее очевидная ООП‑структура, сложнее читать и расширять.

4. Прототипные методы
   - `Cart.prototype.addItem = function (...) { ... }` и другие.
   - Современный подход — использовать синтаксис `class` с методами.

5. Отсутствие приватных полей
   - Все свойства публичные: `this.items`, `this.price`.
   - Проблема: невозможность инкапсулировать внутреннее состояние.

6. Устаревший синтаксис работы со строками и циклами
   - Строки: `"Total: " + formatPrice(...)`.
   - Цикл: `for (var i = 0; i < this.items.length; i++) { ... }`.
